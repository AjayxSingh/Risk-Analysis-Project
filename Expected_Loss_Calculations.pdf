{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "d180762c-5233-4b4c-a91d-597b828310ad",
   "metadata": {},
   "outputs": [],
   "source": [
    "import requests\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "from scipy.stats import norm"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "239730cf-eedf-4727-9069-c1802c10b18a",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>date</th>\n",
       "      <th>symbol</th>\n",
       "      <th>reportedCurrency</th>\n",
       "      <th>cik</th>\n",
       "      <th>fillingDate</th>\n",
       "      <th>acceptedDate</th>\n",
       "      <th>calendarYear</th>\n",
       "      <th>period</th>\n",
       "      <th>cashAndCashEquivalents</th>\n",
       "      <th>shortTermInvestments</th>\n",
       "      <th>cashAndShortTermInvestments</th>\n",
       "      <th>netReceivables</th>\n",
       "      <th>inventory</th>\n",
       "      <th>otherCurrentAssets</th>\n",
       "      <th>totalCurrentAssets</th>\n",
       "      <th>propertyPlantEquipmentNet</th>\n",
       "      <th>goodwill</th>\n",
       "      <th>intangibleAssets</th>\n",
       "      <th>goodwillAndIntangibleAssets</th>\n",
       "      <th>longTermInvestments</th>\n",
       "      <th>taxAssets</th>\n",
       "      <th>otherNonCurrentAssets</th>\n",
       "      <th>totalNonCurrentAssets</th>\n",
       "      <th>otherAssets</th>\n",
       "      <th>totalAssets</th>\n",
       "      <th>accountPayables</th>\n",
       "      <th>shortTermDebt</th>\n",
       "      <th>taxPayables</th>\n",
       "      <th>deferredRevenue</th>\n",
       "      <th>otherCurrentLiabilities</th>\n",
       "      <th>totalCurrentLiabilities</th>\n",
       "      <th>longTermDebt</th>\n",
       "      <th>deferredRevenueNonCurrent</th>\n",
       "      <th>deferredTaxLiabilitiesNonCurrent</th>\n",
       "      <th>otherNonCurrentLiabilities</th>\n",
       "      <th>totalNonCurrentLiabilities</th>\n",
       "      <th>otherLiabilities</th>\n",
       "      <th>capitalLeaseObligations</th>\n",
       "      <th>totalLiabilities</th>\n",
       "      <th>preferredStock</th>\n",
       "      <th>commonStock</th>\n",
       "      <th>retainedEarnings</th>\n",
       "      <th>accumulatedOtherComprehensiveIncomeLoss</th>\n",
       "      <th>othertotalStockholdersEquity</th>\n",
       "      <th>totalStockholdersEquity</th>\n",
       "      <th>totalEquity</th>\n",
       "      <th>totalLiabilitiesAndStockholdersEquity</th>\n",
       "      <th>minorityInterest</th>\n",
       "      <th>totalLiabilitiesAndTotalEquity</th>\n",
       "      <th>totalInvestments</th>\n",
       "      <th>totalDebt</th>\n",
       "      <th>netDebt</th>\n",
       "      <th>link</th>\n",
       "      <th>finalLink</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2023-09-30</td>\n",
       "      <td>ABC</td>\n",
       "      <td>USD</td>\n",
       "      <td>0001490892</td>\n",
       "      <td>2023-09-30</td>\n",
       "      <td>2023-09-29 20:00:00</td>\n",
       "      <td>2023</td>\n",
       "      <td>FY</td>\n",
       "      <td>2592051000</td>\n",
       "      <td>0</td>\n",
       "      <td>2592051000</td>\n",
       "      <td>20911081000</td>\n",
       "      <td>17454768000</td>\n",
       "      <td>1840926000</td>\n",
       "      <td>42798826000</td>\n",
       "      <td>2135171000</td>\n",
       "      <td>9574117000</td>\n",
       "      <td>14005900000</td>\n",
       "      <td>14005900000</td>\n",
       "      <td>63116000</td>\n",
       "      <td>200667000</td>\n",
       "      <td>3355066000</td>\n",
       "      <td>19759920000</td>\n",
       "      <td>0</td>\n",
       "      <td>62558746000</td>\n",
       "      <td>45836037000</td>\n",
       "      <td>641344000</td>\n",
       "      <td>0</td>\n",
       "      <td>-641344000</td>\n",
       "      <td>2995161000</td>\n",
       "      <td>48831198000</td>\n",
       "      <td>4146113000</td>\n",
       "      <td>5372471000</td>\n",
       "      <td>1657944000</td>\n",
       "      <td>1884733000</td>\n",
       "      <td>13061261000</td>\n",
       "      <td>0</td>\n",
       "      <td>924247000</td>\n",
       "      <td>61892459000</td>\n",
       "      <td>0</td>\n",
       "      <td>666287000</td>\n",
       "      <td>4324187000</td>\n",
       "      <td>-1402607000</td>\n",
       "      <td>-2921580000</td>\n",
       "      <td>666287000</td>\n",
       "      <td>810571000</td>\n",
       "      <td>62558746000</td>\n",
       "      <td>144284000</td>\n",
       "      <td>62558746000</td>\n",
       "      <td>63116000</td>\n",
       "      <td>4787457000</td>\n",
       "      <td>2195406000</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2022-09-30</td>\n",
       "      <td>ABC</td>\n",
       "      <td>USD</td>\n",
       "      <td>0001490892</td>\n",
       "      <td>2022-09-30</td>\n",
       "      <td>2022-09-30 00:00:00</td>\n",
       "      <td>2022</td>\n",
       "      <td>FY</td>\n",
       "      <td>3388189000</td>\n",
       "      <td>0</td>\n",
       "      <td>3388189000</td>\n",
       "      <td>18452675000</td>\n",
       "      <td>15556394000</td>\n",
       "      <td>2192500000</td>\n",
       "      <td>39589758000</td>\n",
       "      <td>2135003000</td>\n",
       "      <td>8503886000</td>\n",
       "      <td>4332737000</td>\n",
       "      <td>12836623000</td>\n",
       "      <td>60370000</td>\n",
       "      <td>237571000</td>\n",
       "      <td>1701291000</td>\n",
       "      <td>16970858000</td>\n",
       "      <td>0</td>\n",
       "      <td>56560616000</td>\n",
       "      <td>40192890000</td>\n",
       "      <td>1070473000</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>2214592000</td>\n",
       "      <td>43477955000</td>\n",
       "      <td>4632360000</td>\n",
       "      <td>5782032000</td>\n",
       "      <td>1620413000</td>\n",
       "      <td>976583000</td>\n",
       "      <td>13011388000</td>\n",
       "      <td>0</td>\n",
       "      <td>1022472000</td>\n",
       "      <td>56489343000</td>\n",
       "      <td>0</td>\n",
       "      <td>2927000</td>\n",
       "      <td>2977646000</td>\n",
       "      <td>-1830970000</td>\n",
       "      <td>-1439387000</td>\n",
       "      <td>-289784000</td>\n",
       "      <td>-6952000</td>\n",
       "      <td>56482391000</td>\n",
       "      <td>282832000</td>\n",
       "      <td>56482391000</td>\n",
       "      <td>60370000</td>\n",
       "      <td>5702833000</td>\n",
       "      <td>2314644000</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2021-09-30</td>\n",
       "      <td>ABC</td>\n",
       "      <td>USD</td>\n",
       "      <td>0001490892</td>\n",
       "      <td>2021-09-30</td>\n",
       "      <td>2021-09-30 00:00:00</td>\n",
       "      <td>2021</td>\n",
       "      <td>FY</td>\n",
       "      <td>2547142000</td>\n",
       "      <td>0</td>\n",
       "      <td>2547142000</td>\n",
       "      <td>18389050000</td>\n",
       "      <td>15368352000</td>\n",
       "      <td>2125157000</td>\n",
       "      <td>38802609000</td>\n",
       "      <td>2162961000</td>\n",
       "      <td>9030531000</td>\n",
       "      <td>5256927000</td>\n",
       "      <td>14287458000</td>\n",
       "      <td>0</td>\n",
       "      <td>290791000</td>\n",
       "      <td>1793986000</td>\n",
       "      <td>18535196000</td>\n",
       "      <td>0</td>\n",
       "      <td>57337805000</td>\n",
       "      <td>38009954000</td>\n",
       "      <td>300213000</td>\n",
       "      <td>0</td>\n",
       "      <td>2856405000</td>\n",
       "      <td>192069000</td>\n",
       "      <td>41358641000</td>\n",
       "      <td>6383711000</td>\n",
       "      <td>6243023000</td>\n",
       "      <td>1685296000</td>\n",
       "      <td>1082723000</td>\n",
       "      <td>15394753000</td>\n",
       "      <td>0</td>\n",
       "      <td>946155000</td>\n",
       "      <td>56753394000</td>\n",
       "      <td>0</td>\n",
       "      <td>2907000</td>\n",
       "      <td>1670513000</td>\n",
       "      <td>-445442000</td>\n",
       "      <td>-1004624000</td>\n",
       "      <td>223354000</td>\n",
       "      <td>584411000</td>\n",
       "      <td>57337805000</td>\n",
       "      <td>361057000</td>\n",
       "      <td>57337805000</td>\n",
       "      <td>0</td>\n",
       "      <td>6683924000</td>\n",
       "      <td>4136782000</td>\n",
       "      <td>None</td>\n",
       "      <td>None</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2020-09-30</td>\n",
       "      <td>ABC</td>\n",
       "      <td>USD</td>\n",
       "      <td>0001490892</td>\n",
       "      <td>2021-02-05</td>\n",
       "      <td>2021-02-05 07:18:21</td>\n",
       "      <td>2020</td>\n",
       "      <td>FY</td>\n",
       "      <td>4597746000</td>\n",
       "      <td>0</td>\n",
       "      <td>4597746000</td>\n",
       "      <td>14298880000</td>\n",
       "      <td>12589278000</td>\n",
       "      <td>1533949000</td>\n",
       "      <td>33019853000</td>\n",
       "      <td>1484808000</td>\n",
       "      <td>6706719000</td>\n",
       "      <td>1886107000</td>\n",
       "      <td>8592826000</td>\n",
       "      <td>0</td>\n",
       "      <td>70522000</td>\n",
       "      <td>779854000</td>\n",
       "      <td>10928010000</td>\n",
       "      <td>0</td>\n",
       "      <td>43947863000</td>\n",
       "      <td>31705055000</td>\n",
       "      <td>501259000</td>\n",
       "      <td>0</td>\n",
       "      <td>53149000</td>\n",
       "      <td>1593614000</td>\n",
       "      <td>33853077000</td>\n",
       "      <td>3618261000</td>\n",
       "      <td>53149000</td>\n",
       "      <td>591214000</td>\n",
       "      <td>6671798000</td>\n",
       "      <td>10934422000</td>\n",
       "      <td>0</td>\n",
       "      <td>189404000</td>\n",
       "      <td>44787499000</td>\n",
       "      <td>0</td>\n",
       "      <td>2878000</td>\n",
       "      <td>518335000</td>\n",
       "      <td>-108830000</td>\n",
       "      <td>-1252019000</td>\n",
       "      <td>-839636000</td>\n",
       "      <td>-660348000</td>\n",
       "      <td>43947863000</td>\n",
       "      <td>179288000</td>\n",
       "      <td>43947863000</td>\n",
       "      <td>0</td>\n",
       "      <td>4119520000</td>\n",
       "      <td>-478226000</td>\n",
       "      <td>https://www.sec.gov/Archives/edgar/data/149089...</td>\n",
       "      <td>https://www.sec.gov/Archives/edgar/data/149089...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2019-09-30</td>\n",
       "      <td>ABC</td>\n",
       "      <td>USD</td>\n",
       "      <td>0001490892</td>\n",
       "      <td>2020-02-07</td>\n",
       "      <td>2020-02-07 07:18:29</td>\n",
       "      <td>2019</td>\n",
       "      <td>FY</td>\n",
       "      <td>3374194000</td>\n",
       "      <td>0</td>\n",
       "      <td>3374194000</td>\n",
       "      <td>12386879000</td>\n",
       "      <td>11060254000</td>\n",
       "      <td>1310727000</td>\n",
       "      <td>28132054000</td>\n",
       "      <td>1770516000</td>\n",
       "      <td>6705507000</td>\n",
       "      <td>2294836000</td>\n",
       "      <td>9000343000</td>\n",
       "      <td>-287638000</td>\n",
       "      <td>287638000</td>\n",
       "      <td>269067000</td>\n",
       "      <td>11039926000</td>\n",
       "      <td>0</td>\n",
       "      <td>39171980000</td>\n",
       "      <td>28385074000</td>\n",
       "      <td>139012000</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1057208000</td>\n",
       "      <td>29581294000</td>\n",
       "      <td>4033880000</td>\n",
       "      <td>33119000</td>\n",
       "      <td>1860195000</td>\n",
       "      <td>670286000</td>\n",
       "      <td>6597480000</td>\n",
       "      <td>0</td>\n",
       "      <td>187443000</td>\n",
       "      <td>36178774000</td>\n",
       "      <td>0</td>\n",
       "      <td>2853000</td>\n",
       "      <td>4235491000</td>\n",
       "      <td>-111965000</td>\n",
       "      <td>-1133173000</td>\n",
       "      <td>2993206000</td>\n",
       "      <td>3107495000</td>\n",
       "      <td>39171980000</td>\n",
       "      <td>114289000</td>\n",
       "      <td>39171980000</td>\n",
       "      <td>-287638000</td>\n",
       "      <td>4172892000</td>\n",
       "      <td>798698000</td>\n",
       "      <td>https://www.sec.gov/Archives/edgar/data/149089...</td>\n",
       "      <td>https://www.sec.gov/Archives/edgar/data/149089...</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "         date symbol reportedCurrency         cik fillingDate  \\\n",
       "0  2023-09-30    ABC              USD  0001490892  2023-09-30   \n",
       "1  2022-09-30    ABC              USD  0001490892  2022-09-30   \n",
       "2  2021-09-30    ABC              USD  0001490892  2021-09-30   \n",
       "3  2020-09-30    ABC              USD  0001490892  2021-02-05   \n",
       "4  2019-09-30    ABC              USD  0001490892  2020-02-07   \n",
       "\n",
       "          acceptedDate calendarYear period  cashAndCashEquivalents  \\\n",
       "0  2023-09-29 20:00:00         2023     FY              2592051000   \n",
       "1  2022-09-30 00:00:00         2022     FY              3388189000   \n",
       "2  2021-09-30 00:00:00         2021     FY              2547142000   \n",
       "3  2021-02-05 07:18:21         2020     FY              4597746000   \n",
       "4  2020-02-07 07:18:29         2019     FY              3374194000   \n",
       "\n",
       "   shortTermInvestments  cashAndShortTermInvestments  netReceivables  \\\n",
       "0                     0                   2592051000     20911081000   \n",
       "1                     0                   3388189000     18452675000   \n",
       "2                     0                   2547142000     18389050000   \n",
       "3                     0                   4597746000     14298880000   \n",
       "4                     0                   3374194000     12386879000   \n",
       "\n",
       "     inventory  otherCurrentAssets  totalCurrentAssets  \\\n",
       "0  17454768000          1840926000         42798826000   \n",
       "1  15556394000          2192500000         39589758000   \n",
       "2  15368352000          2125157000         38802609000   \n",
       "3  12589278000          1533949000         33019853000   \n",
       "4  11060254000          1310727000         28132054000   \n",
       "\n",
       "   propertyPlantEquipmentNet    goodwill  intangibleAssets  \\\n",
       "0                 2135171000  9574117000       14005900000   \n",
       "1                 2135003000  8503886000        4332737000   \n",
       "2                 2162961000  9030531000        5256927000   \n",
       "3                 1484808000  6706719000        1886107000   \n",
       "4                 1770516000  6705507000        2294836000   \n",
       "\n",
       "   goodwillAndIntangibleAssets  longTermInvestments  taxAssets  \\\n",
       "0                  14005900000             63116000  200667000   \n",
       "1                  12836623000             60370000  237571000   \n",
       "2                  14287458000                    0  290791000   \n",
       "3                   8592826000                    0   70522000   \n",
       "4                   9000343000           -287638000  287638000   \n",
       "\n",
       "   otherNonCurrentAssets  totalNonCurrentAssets  otherAssets  totalAssets  \\\n",
       "0             3355066000            19759920000            0  62558746000   \n",
       "1             1701291000            16970858000            0  56560616000   \n",
       "2             1793986000            18535196000            0  57337805000   \n",
       "3              779854000            10928010000            0  43947863000   \n",
       "4              269067000            11039926000            0  39171980000   \n",
       "\n",
       "   accountPayables  shortTermDebt  taxPayables  deferredRevenue  \\\n",
       "0      45836037000      641344000            0       -641344000   \n",
       "1      40192890000     1070473000            0                0   \n",
       "2      38009954000      300213000            0       2856405000   \n",
       "3      31705055000      501259000            0         53149000   \n",
       "4      28385074000      139012000            0                0   \n",
       "\n",
       "   otherCurrentLiabilities  totalCurrentLiabilities  longTermDebt  \\\n",
       "0               2995161000              48831198000    4146113000   \n",
       "1               2214592000              43477955000    4632360000   \n",
       "2                192069000              41358641000    6383711000   \n",
       "3               1593614000              33853077000    3618261000   \n",
       "4               1057208000              29581294000    4033880000   \n",
       "\n",
       "   deferredRevenueNonCurrent  deferredTaxLiabilitiesNonCurrent  \\\n",
       "0                 5372471000                        1657944000   \n",
       "1                 5782032000                        1620413000   \n",
       "2                 6243023000                        1685296000   \n",
       "3                   53149000                         591214000   \n",
       "4                   33119000                        1860195000   \n",
       "\n",
       "   otherNonCurrentLiabilities  totalNonCurrentLiabilities  otherLiabilities  \\\n",
       "0                  1884733000                 13061261000                 0   \n",
       "1                   976583000                 13011388000                 0   \n",
       "2                  1082723000                 15394753000                 0   \n",
       "3                  6671798000                 10934422000                 0   \n",
       "4                   670286000                  6597480000                 0   \n",
       "\n",
       "   capitalLeaseObligations  totalLiabilities  preferredStock  commonStock  \\\n",
       "0                924247000       61892459000               0    666287000   \n",
       "1               1022472000       56489343000               0      2927000   \n",
       "2                946155000       56753394000               0      2907000   \n",
       "3                189404000       44787499000               0      2878000   \n",
       "4                187443000       36178774000               0      2853000   \n",
       "\n",
       "   retainedEarnings  accumulatedOtherComprehensiveIncomeLoss  \\\n",
       "0        4324187000                              -1402607000   \n",
       "1        2977646000                              -1830970000   \n",
       "2        1670513000                               -445442000   \n",
       "3         518335000                               -108830000   \n",
       "4        4235491000                               -111965000   \n",
       "\n",
       "   othertotalStockholdersEquity  totalStockholdersEquity  totalEquity  \\\n",
       "0                   -2921580000                666287000    810571000   \n",
       "1                   -1439387000               -289784000     -6952000   \n",
       "2                   -1004624000                223354000    584411000   \n",
       "3                   -1252019000               -839636000   -660348000   \n",
       "4                   -1133173000               2993206000   3107495000   \n",
       "\n",
       "   totalLiabilitiesAndStockholdersEquity  minorityInterest  \\\n",
       "0                            62558746000         144284000   \n",
       "1                            56482391000         282832000   \n",
       "2                            57337805000         361057000   \n",
       "3                            43947863000         179288000   \n",
       "4                            39171980000         114289000   \n",
       "\n",
       "   totalLiabilitiesAndTotalEquity  totalInvestments   totalDebt     netDebt  \\\n",
       "0                     62558746000          63116000  4787457000  2195406000   \n",
       "1                     56482391000          60370000  5702833000  2314644000   \n",
       "2                     57337805000                 0  6683924000  4136782000   \n",
       "3                     43947863000                 0  4119520000  -478226000   \n",
       "4                     39171980000        -287638000  4172892000   798698000   \n",
       "\n",
       "                                                link  \\\n",
       "0                                               None   \n",
       "1                                               None   \n",
       "2                                               None   \n",
       "3  https://www.sec.gov/Archives/edgar/data/149089...   \n",
       "4  https://www.sec.gov/Archives/edgar/data/149089...   \n",
       "\n",
       "                                           finalLink  \n",
       "0                                               None  \n",
       "1                                               None  \n",
       "2                                               None  \n",
       "3  https://www.sec.gov/Archives/edgar/data/149089...  \n",
       "4  https://www.sec.gov/Archives/edgar/data/149089...  "
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def api_call(ticker):\n",
    "    url = f'https://financialmodelingprep.com/api/v3/balance-sheet-statement/{ticker}?period=annual&apikey=FCazkcdySuLOf9TJiEMOaqykEB4Du8f1'\n",
    "    response = requests.get(url)\n",
    "    data = response.json()\n",
    "    pd.set_option('display.max_columns', None)\n",
    "    df = pd.DataFrame(data) \n",
    "    return df\n",
    "\n",
    "ticker = 'ABC'\n",
    "df = api_call(ticker)\n",
    "df"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "1c5edddf-1a9a-4868-a98d-748079f1af64",
   "metadata": {},
   "outputs": [],
   "source": [
    "def required_informations(df):\n",
    "    firm_value = df['totalAssets'][0]\n",
    "    risk_free_rate = 0.03\n",
    "    time = 1\n",
    "    df['assets_log_return'] = np.log(df['totalAssets']/df['totalAssets'].shift(1))\n",
    "    vol= df['assets_log_return'].std()\n",
    "    return firm_value, risk_free_rate, vol, time\n",
    "\n",
    "A, mu, sigma, t = required_informations(df)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "a65ee06e-71e2-4ca9-a60f-99ff4680095a",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The exposure at default:- 825000000.0\n"
     ]
    }
   ],
   "source": [
    "def ead(rating,bond,commitment):              \n",
    "    rating_dict = {                            #the UGD lookup is from Internal credit risk model\n",
    "        \"AAA\":0.69,\"AA\":0.73,\"A\":0.71,\n",
    "        \"BBB\":0.65,\"BB\":0.52,\"B\":0.48,\n",
    "        \"CCC\":0.44\n",
    "    }\n",
    "    EAD = bond + rating_dict[rating] * commitment\n",
    "    return EAD\n",
    "\n",
    "EAD = ead(\"BBB\",500000000,500000000)\n",
    "print(f'The exposure at default:- {EAD}')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "id": "ff70a52c-1103-44b0-ac7e-74f8d3d6321f",
   "metadata": {},
   "outputs": [],
   "source": [
    "def default_point_calculations(df):\n",
    "    long_current_liabilities_max = df['totalNonCurrentLiabilities'].max()\n",
    "    short_liabilities_max = df['totalCurrentLiabilities'].max()\n",
    "    default_point = short_liabilities_max  + long_current_liabilities_max * 0.5\n",
    "    return default_point \n",
    "\n",
    "default_point = default_point_calculations(df)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "id": "fa541923-3bfe-4b0d-83d5-682cbbe1894c",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The probability Default is:- 13.850479647036506 %\n"
     ]
    }
   ],
   "source": [
    "def calculate_PD(A,L,sigma,mu,t):\n",
    "    numerator = np.log(A/L) + (mu - 0.5*sigma**2)*(t)\n",
    "    denominator = sigma * np.sqrt(t);\n",
    "    DD = numerator/denominator\n",
    "    np_1 = norm.cdf(DD)\n",
    "    PD = 1 - np_1\n",
    "    return PD * 100\n",
    "\n",
    "PD = calculate_PD(A, default_point, sigma, mu, t)\n",
    "print(f'The probability Default is:- {PD} %')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "id": "614a312e-2905-412a-a76a-fc20845b4f14",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The Loss Giving Default is:- 48.754545454545465 %\n"
     ]
    }
   ],
   "source": [
    "avg_LGD_on_bonds = 0.5637\n",
    "std = 0.0104\n",
    "max_for_bonds = 1.1\n",
    "def LGD_calculations(avg, std, max_value):\n",
    "    alpha = (avg/max_value)*((avg*(max_value-avg)/max_value*std**2)-1)\n",
    "    beta  = alpha*((max_value/avg)-1)\n",
    "    mean_recovery = alpha/(alpha + beta)\n",
    "    LGD = 1 - mean_recovery\n",
    "    return LGD\n",
    "\n",
    "LGD = LGD_calculations(avg_LGD_on_bonds, std, max_for_bonds)*100\n",
    "print(f'The Loss Giving Default is:- {LGD} %')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "id": "7d4087b0-de8a-4985-b1aa-dbb407f64d31",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The Expected loss is:- $55710091.760292605 \n"
     ]
    }
   ],
   "source": [
    "def exposure_at_default(EAD, PD, LGD):\n",
    "    EL = (EAD * LGD * PD)/1e4\n",
    "    return EL\n",
    "EL = exposure_at_default(EAD, PD, LGD)\n",
    "print(f'The Expected loss is:- ${EL} ')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "6f6da55b-dda3-4dc0-8cd5-dfa5d79387e7",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
